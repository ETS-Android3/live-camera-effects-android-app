{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?72dd","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./lib/trixie.js"],"names":["App","name","data","selectedMode","modes","key","uniforms","kernel","argument","menu","tx","captureNextFrame","facingMode","animating","mediaStream","watch","x","this","trixie_default","a","input","document","getElementById","shader","shaders","output","startStreaming","methods","dataURItoBlob","dataURI","byteString","split","indexOf","atob","unescape","mimeString","ia","Uint8Array","length","i","charCodeAt","Blob","type","saveFrame","frame","filename","Date","now","window","blob","resolveLocalFileSystemURL","dir","getFile","create","file","createWriter","fileWriter","write","alert","err","console","log","createElement","href","download","click","animate","render","toDataURL","requestAnimationFrame","_this","getTracks","forEach","track","stop","constraints","audio","video","navigator","mediaDevices","getUserMedia","then","srcObject","onloadedmetadata","e","play","catch","message","mounted","_this2","addEventListener","cordova","plugins","diagnostic","requestCameraAuthorization","status","permissionStatus","GRANTED","error","selectortype_template_index_0_src_App","_vm","_h","$createElement","_c","_self","attrs","id","staticStyle","display","_v","_m","staticClass","_l","mode","class","on","$event","_s","_e","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Vue","config","productionTip","el","components","template","require","f","t","n","r","s","o","u","Error","code","l","exports","call","1","module","Object","defineProperty","value","default","identity","invert","flip","blur","kaleidoscope4","kaleidoscope6","zoom","convolve","verticalMirror","horizontalMirror","colorShift","void","2","_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","Trixie","opts","instance","TypeError","_classCallCheck","initialized","uniformLocations","vertexShader","time","dt","program","gl","fragmentShader","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","getContext","vs","createShader","VERTEX_SHADER","shaderSource","compileShader","fs","FRAGMENT_SHADER","getShaderInfoLog","createProgram","attachShader","linkProgram","useProgram","setupTexture","texImage2D","RGBA","UNSIGNED_BYTE","fbo","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","getUniformLocation","resolution","keys","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","position","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","tbuffer","texCoord","initialize","uniform1i","uniform2f","width","height","uniform1f","uniform1fv","scrollWidth","scrollHeight","viewport","drawArrays","TRIANGLES","./shaders.js","./uniforms.js","3","y","factor"],"mappings":"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","file":"static/js/app.b903cf22fbb9c7cd7069.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <video id=\"video\" style=\"display: none\"/>\n    <div id=\"canvas-container\">\n      <canvas id=\"canvas\"></canvas>\n    </div>\n    <div id=\"menu\" v-if=\"menu\">\n      <div id=\"menu-header\">Choose mode</div>\n      <div class=\"menu-items\">\n        <div\n          v-for=\"mode of modes\"\n          v-bind:class=\"'menu-item' + (selectedMode.key == mode.key ? ' menu-item-selected' : '')\"\n          v-on:click=\"selectedMode = mode\">\n          {{mode.name}}\n        </div>\n      </div>\n    </div>\n    <div id=\"top\" v-if=\"!menu\">\n      <div class=\"top-item\">\n        <i class=\"material-icons\" v-on:click=\"menu = true\">menu</i>\n      </div>\n      <div class=\"top-item\">\n        <i class=\"material-icons\" v-if=\"facingMode == 'environment'\" v-on:click=\"facingMode = 'user'\">portrait</i>\n        <i class=\"material-icons\" v-if=\"facingMode == 'user'\" v-on:click=\"facingMode = 'environment'\">landscape</i>\n      </div>\n      <div class=\"top-item-right\">\n        <i class=\"material-icons\" v-on:click=\"captureNextFrame = true\">photo_camera</i>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Trixie from '../lib/trixie.js';\nexport default {\n  name: 'App',\n  data() {\n    return {\n      selectedMode: null,\n      modes: [\n        { name: \"Default\", key: \"identity\" },\n        { name: \"Invert\", key: \"invert\"},\n        { name: \"Color shift\", key: \"colorShift\"},\n        { name: \"Vertical mirror\", key: \"verticalMirror\"},\n        { name: \"Horizontal mirror\", key: \"horizontalMirror\"},\n        { name: \"Kaleidoscope 4\", key: \"kaleidoscope4\"},\n        { name: \"Kaleidoscope 6\", key: \"kaleidoscope6\"},\n        { name: \"Sharpen\", key: \"convolve\", uniforms: { kernel: [0,-3,0,-3,13,-3,0,-3,0] }, argument: \"kernel\" },\n        { name: \"Edge detection\", key: \"convolve\", uniforms: { kernel: [1,1,1,1,-8,1,1,1,1] }, argument: \"kernel\" }\n      ],\n      menu: false,\n      tx: null,\n      captureNextFrame: false,\n      facingMode: \"environment\",\n      animating: false,\n      mediaStream: null\n    }\n  },\n  watch: {\n    selectedMode: function(x) {\n      this.tx = new Trixie({\n        input: document.getElementById('video'),\n        shader: (\"uniforms\" in this.selectedMode && \"argument\" in this.selectedMode) ?\n          Trixie.shaders[this.selectedMode.key](this.selectedMode.uniforms[this.selectedMode.argument]) :\n          Trixie.shaders[this.selectedMode.key](),\n        output: document.getElementById(\"canvas\"),\n        uniforms: this.selectedMode.uniforms\n      });\n      this.menu = false;\n    },\n    facingMode: function(x) {\n      this.startStreaming();\n    }\n  },\n  methods: {\n    dataURItoBlob(dataURI) {\n        // https://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata\n        // convert base64/URLEncoded data component to raw binary data held in a string\n        var byteString;\n        if (dataURI.split(',')[0].indexOf('base64') >= 0)\n            byteString = atob(dataURI.split(',')[1]);\n        else\n            byteString = unescape(dataURI.split(',')[1]);\n        // separate out the mime component\n        var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n        // write the bytes of the string to a typed array\n        var ia = new Uint8Array(byteString.length);\n        for (var i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n        return new Blob([ia], {type:mimeString});\n    },\n    saveFrame(frame) {\n      var filename = \"capture_\" + Date.now() + \".png\";\n      if ('cordova' in window) {\n        let blob = this.dataURItoBlob(frame);\n        let folderpath = \"file:///storage/emulated/0/Download\";\n        window.resolveLocalFileSystemURL(folderpath, function(dir) {\n          dir.getFile(filename, {create:true}, function(file) {\n            file.createWriter(function(fileWriter) {\n               fileWriter.write(blob);\n               alert(\"Photo saved to Download folder (\" + filename + \")\");\n            }, function(err){\n               console.log(err);\n            });\n          });\n        });\n      } else {\n        let a = document.createElement('a');\n        a.href = frame;\n        a.download = filename;\n        a.click();\n      }\n    },\n    animate() {\n      this.tx.render();\n      if (this.captureNextFrame) {\n        this.captureNextFrame = false;\n        let frame = document.getElementById(\"canvas\").toDataURL(); // Second param is quality.\n        this.saveFrame(frame);\n      }\n      window.requestAnimationFrame(this.animate);\n    },\n    startStreaming() {\n      if (this.mediaStream) {\n        this.mediaStream.getTracks().forEach(track => track.stop())\n      }\n      let constraints = { audio: false, video: { facingMode: this.facingMode } };\n      navigator.mediaDevices.getUserMedia(constraints).then(mediaStream => {\n        this.mediaStream = mediaStream;\n        let video = document.getElementById('video');\n        video.srcObject = mediaStream;\n        video.onloadedmetadata = e => {\n          video.play();\n          this.tx = new Trixie({\n              input: video,\n              shader: (\"uniforms\" in this.selectedMode && \"argument\" in this.selectedMode) ?\n                Trixie.shaders[this.selectedMode.key](this.selectedMode.uniforms[this.selectedMode.argument]) :\n                Trixie.shaders[this.selectedMode.key](),\n              output: document.getElementById(\"canvas\"),\n              uniforms: this.selectedMode.uniforms\n          });\n          if (!this.animating) {\n            this.animating = true;\n            this.animate();\n          }\n        };\n      }).catch(err => {\n        console.log(err.name + \": \" + err.message);\n      });\n    }\n  },\n  mounted() {\n    this.selectedMode = this.modes[0];\n    if ('cordova' in window) {\n      document.addEventListener('deviceready', () => {\n        cordova.plugins.diagnostic.requestCameraAuthorization(\n          status => {\n            if (status == cordova.plugins.diagnostic.permissionStatus.GRANTED) {\n              this.startStreaming()\n            } else {\n              console.log(\"Camera permission denied\");\n            }\n          },\n          error => { console.log(\"Camera authorization error: \" + error) },\n          false\n        );\n      });\n    } else {\n      this.startStreaming();\n    }\n\n  }\n}\n</script>\n\n<style>\nhtml, body, #app {\n  width: 100%; height: 100%; margin: 0px; padding: 0px;\n}\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n#canvas-container {\n  background: black;\n  height: calc(100% - 0px);\n  width: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n}\n#canvas {\n  width: 100%;\n  height: 100%;\n}\n#top {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  background: rgba(0,0,0,0.25);\n  color: white;\n  width: 100%;\n  height: 50px;\n  line-height: 50px;\n}\n#menu {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.25);\n  color: white;\n}\n#menu-header {\n  height: 50px;\n  line-height: 50px;\n  background: rgba(0,0,0,0.25);\n  padding-left: 20px;\n  font-weight: bold;\n}\n.menu-items {\n  padding: 10px;\n}\n.menu-item {\n  margin-bottom: 10px;\n  background: rgba(0,0,0,0.125);\n  padding: 10px;\n}\n.menu-item-selected {\n  font-weight: bold;\n  background: rgba(0,0,0,0.25);\n}\n\n.top-item, .top-item-right {\n  height: 50px;\n}\n.top-item > i, .top-item-right > i {\n  font-size: 28px;\n  line-height: 50px;\n}\n.top-item {\n  margin-left: 10px;\n  float: left;\n}\n.top-item-right {\n  float: right;\n  margin-right: 10px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('video',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"video\"}}),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),(_vm.menu)?_c('div',{attrs:{\"id\":\"menu\"}},[_c('div',{attrs:{\"id\":\"menu-header\"}},[_vm._v(\"Choose mode\")]),_vm._v(\" \"),_c('div',{staticClass:\"menu-items\"},_vm._l((_vm.modes),function(mode){return _c('div',{class:'menu-item' + (_vm.selectedMode.key == mode.key ? ' menu-item-selected' : ''),on:{\"click\":function($event){_vm.selectedMode = mode}}},[_vm._v(\"\\n        \"+_vm._s(mode.name)+\"\\n      \")])}),0)]):_vm._e(),_vm._v(\" \"),(!_vm.menu)?_c('div',{attrs:{\"id\":\"top\"}},[_c('div',{staticClass:\"top-item\"},[_c('i',{staticClass:\"material-icons\",on:{\"click\":function($event){_vm.menu = true}}},[_vm._v(\"menu\")])]),_vm._v(\" \"),_c('div',{staticClass:\"top-item\"},[(_vm.facingMode == 'environment')?_c('i',{staticClass:\"material-icons\",on:{\"click\":function($event){_vm.facingMode = 'user'}}},[_vm._v(\"portrait\")]):_vm._e(),_vm._v(\" \"),(_vm.facingMode == 'user')?_c('i',{staticClass:\"material-icons\",on:{\"click\":function($event){_vm.facingMode = 'environment'}}},[_vm._v(\"landscape\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"top-item-right\"},[_c('i',{staticClass:\"material-icons\",on:{\"click\":function($event){_vm.captureNextFrame = true}}},[_vm._v(\"photo_camera\")])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"canvas-container\"}},[_c('canvas',{attrs:{\"id\":\"canvas\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-00d5e2ba\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-00d5e2ba\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-00d5e2ba\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Trixie = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/*\n\tStock shaders\n*/\n\nexports.default = {\n\tidentity: function identity() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tgl_FragColor = texture2D(texture, texCoord);\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tinvert: function invert() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tvec4 color = texture2D(texture, texCoord);\\n\\t\\t\\t\\tgl_FragColor = vec4(vec3(1.0 - color.rgb), color.a);\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tflip: function flip() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tvec2 coord = vec2(1.0-texCoord.x, texCoord.y);\\n\\t\\t\\t\\tvec4 color = texture2D(texture, coord);\\n\\t\\t\\t\\tgl_FragColor = color;\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tblur: function blur() {\n\t\treturn \"\\n\\t\\t\\t#define radius 10\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform vec2 resolution;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tvec4 avg = vec4(0);\\n\\t\\t\\t\\tint count = 0;\\n\\t\\t\\t\\tfor (int i = -radius; i < radius; i++) {\\n\\t\\t\\t\\t\\tfor (int j = -radius; j < radius; j++) {\\n\\t\\t\\t\\t\\t\\tif (i*i+j*j <= radius*radius) {\\n\\t\\t\\t\\t\\t\\t\\tavg += texture2D(\\n\\t\\t\\t\\t\\t\\t\\t\\ttexture,\\n\\t\\t\\t\\t\\t\\t\\t\\tvec2(texCoord.x + float(i)/resolution.x, texCoord.y + float(j)/resolution.y)\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\tcount += 1;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tavg = avg / float(count);\\n\\t\\t\\t\\tgl_FragColor = avg;\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tkaleidoscope4: function kaleidoscope4() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tuniform float time;\\n\\t\\t\\tvec2 Kaleidoscope( vec2 uv, float n) {\\n\\t\\t\\t\\tfloat PI = 3.1415926535897932384626433832795;\\n\\t\\t    float angle = PI / n;\\n\\t\\t    float r = length( uv );\\n\\t\\t    float a = atan( uv.y, uv.x ) / angle;\\n\\t\\t    a = mix( fract( a ), 1.0 - fract( a ), mod( floor( a ), 2.0 ) ) * angle;\\n\\t\\t    // radial = vec2(a, r);\\n\\t\\t    return vec2( cos( a ), sin( a ) ) * r;\\n\\t\\t  }\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tfloat rotation = 0.0;\\n\\t\\t\\t\\tfloat scale = 1.0;\\n\\t\\t\\t\\tvec2 pos = vec2(0.5, 0.5);\\n\\t\\t\\t\\tfloat blades = 4.0;\\n\\t\\t\\t\\tvec2 uv = texCoord.xy - 0.5;\\n\\t\\t\\t\\tvec2 k = Kaleidoscope(uv * mat2(cos(rotation), -sin(rotation), sin(rotation), cos(rotation)), blades);\\n\\t\\t\\t\\tmat2 rm = mat2(cos(rotation), -sin(rotation), sin(rotation), cos(rotation));\\n\\t\\t\\t\\tvec2 colour_k = rm * (k * scale + pos);\\n\\t\\t\\t\\tvec4 color = texture2D(texture, colour_k);\\n\\t\\t\\t\\tgl_FragColor = color;\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tkaleidoscope6: function kaleidoscope6() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tuniform float time;\\n\\t\\t\\tvec2 Kaleidoscope( vec2 uv, float n) {\\n\\t\\t\\t\\tfloat PI = 3.1415926535897932384626433832795;\\n\\t\\t    float angle = PI / n;\\n\\t\\t    float r = length( uv );\\n\\t\\t    float a = atan( uv.y, uv.x ) / angle;\\n\\t\\t    a = mix( fract( a ), 1.0 - fract( a ), mod( floor( a ), 2.0 ) ) * angle;\\n\\t\\t    // radial = vec2(a, r);\\n\\t\\t    return vec2( cos( a ), sin( a ) ) * r;\\n\\t\\t  }\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tfloat rotation = 0.0;\\n\\t\\t\\t\\tfloat scale = 1.0;\\n\\t\\t\\t\\tvec2 pos = vec2(0.5, 0.5);\\n\\t\\t\\t\\tfloat blades = 6.0;\\n\\t\\t\\t\\tvec2 uv = texCoord.xy - 0.5;\\n\\t\\t\\t\\tvec2 k = Kaleidoscope(uv * mat2(cos(rotation), -sin(rotation), sin(rotation), cos(rotation)), blades);\\n\\t\\t\\t\\tmat2 rm = mat2(cos(rotation), -sin(rotation), sin(rotation), cos(rotation));\\n\\t\\t\\t\\tvec2 colour_k = rm * (k * scale + pos);\\n\\t\\t\\t\\tvec4 color = texture2D(texture, colour_k);\\n\\t\\t\\t\\tgl_FragColor = color;\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tzoom: function zoom() {\n\t\treturn \"\\n\\t\\t\\t\\tprecision highp float;\\n\\t\\t\\t\\tuniform float x;\\n\\t\\t\\t\\tuniform float y;\\n\\t\\t\\t\\tuniform float factor;\\n\\t\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\t\\tvoid main() {\\n\\t\\t\\t\\t\\tvec2 coord = vec2((texCoord.x - x)/factor + x, (texCoord.y - y)/factor + y);\\n\\t\\t\\t\\t\\tvec4 color = texture2D(texture, coord);\\n\\t\\t\\t\\t\\tgl_FragColor = color;\\n\\t\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tconvolve: function convolve(kernel) {\n\t\treturn \"\\n\\t\\t\\t#define size \" + kernel.length + \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tuniform float kernel[size];\\n\\t\\t\\tuniform vec2 resolution;\\n\\t\\t\\tfloat intmod(float a, float b) {\\n\\t\\t\\t\\t\\tfloat m=a-floor((a+0.5)/b)*b;\\n\\t\\t\\t\\t\\treturn floor(m+0.5);\\n\\t\\t\\t}\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tvec4 avg = vec4(0);\\n\\t\\t\\t\\tint len = int(sqrt(float(size)));\\n\\t\\t\\t\\tfloat total = 0.0;\\n\\t\\t\\t\\tfor (int i = 0; i < size; i++) {\\n\\t\\t\\t\\t\\tint x = int(intmod(float(i), float(len)));\\n\\t\\t\\t\\t\\tint y = i / len;\\n\\t\\t\\t\\t\\tfloat weight = kernel[i];\\n\\t\\t\\t\\t\\tvec2 dp = vec2(float(x)-(float(len)-1.0)/(2.0), float(y)-(float(len)-1.0)/(2.0));\\n\\t\\t\\t\\t\\tavg += weight*texture2D(texture, texCoord + dp / resolution);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tgl_FragColor = vec4(avg.xyz, 1.0);\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tverticalMirror: function verticalMirror() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tfloat x;\\n\\t\\t\\t\\tif (texCoord.x < 0.5) x = texCoord.x;\\n\\t\\t\\t\\telse x = 1.0 - texCoord.x;\\n\\t\\t\\t\\tvec4 color = texture2D(texture, vec2(x, texCoord.y));\\n\\t\\t\\t\\tgl_FragColor = color;\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\thorizontalMirror: function horizontalMirror() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tfloat y;\\n\\t\\t\\t\\tif (texCoord.y < 0.5) y = texCoord.y;\\n\\t\\t\\t\\telse y = 1.0 - texCoord.y;\\n\\t\\t\\t\\tvec4 color = texture2D(texture, vec2(texCoord.x, y));\\n\\t\\t\\t\\tgl_FragColor = color;\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tcolorShift: function colorShift() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tuniform float time;\\n\\t\\t\\tuniform sampler2D texture;\\n\\t\\t\\tvec3 rgb2hsv(vec3 c) {\\n\\t\\t    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\\n\\t\\t    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\\n\\t\\t    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\\n\\t\\t    float d = q.x - min(q.w, q.y);\\n\\t\\t    float e = 1.0e-10;\\n\\t\\t    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\\n\\t\\t\\t}\\n\\t\\t\\tvec3 hsv2rgb(vec3 c) {\\n\\t\\t\\t    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\\n\\t\\t\\t    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\\n\\t\\t\\t    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\\n\\t\\t\\t}\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tvec4 cin = texture2D(texture, texCoord);\\n\\t\\t\\t\\tvec3 hsv = rgb2hsv(cin.rgb);\\n\\t\\t\\t\\tvec3 cout = hsv2rgb(vec3(fract(hsv.x + time*0.1), hsv.y, hsv.z));\\n\\t\\t\\t\\tgl_FragColor = vec4(cout, 1.0);\\n\\t\\t\\t}\\n\\t\\t\";\n\t},\n\tvoid: function _void() {\n\t\treturn \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\tgl_FragColor = vec4(vec3(0), 1.0);\\n\\t\\t\\t}\\n\\t\\t\";\n\t}\n};\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Trixie = function () {\n\tfunction Trixie(opts) {\n\t\t_classCallCheck(this, Trixie);\n\n\t\tthis.initialized = false;\n\t\tthis.uniforms = opts.uniforms || {};\n\t\tthis.uniformLocations = {};\n\t\tthis.vertexShader = \"\\n\\t\\t\\tprecision highp float;\\n\\t\\t\\tattribute vec3 position;\\n\\t\\t\\tattribute vec2 coord;\\n\\t\\t\\tvarying vec2 texCoord;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\t\\ttexCoord = coord;\\n\\t\\t\\t  \\tgl_Position = vec4(position, 1.0);\\n\\t\\t\\t}\\n\\t\\t\";\n\t\tthis.time = 0;\n\t\tthis.dt = 0.01;\n\t\tthis.program = null;\n\t\tthis.gl = null; // output canvas gl context\n\t\tthis.fragmentShader = opts.shader;\n\t\tthis.input = opts.input;\n\t\tthis.output = opts.output;\n\t\treturn this;\n\t}\n\n\t_createClass(Trixie, [{\n\t\tkey: \"setupTexture\",\n\t\tvalue: function setupTexture() {\n\t\t\tvar texture = this.gl.createTexture();\n\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\n\t\t\treturn texture;\n\t\t}\n\t}, {\n\t\tkey: \"initialize\",\n\t\tvalue: function initialize() {\n\t\t\tvar _this = this;\n\n\t\t\tvar gl = this.output.getContext(\"webgl\");\n\t\t\tthis.gl = gl;\n\t\t\tvar vs = gl.createShader(gl.VERTEX_SHADER);\n\t\t\tgl.shaderSource(vs, this.vertexShader);\n\t\t\tgl.compileShader(vs);\n\t\t\tvar fs = gl.createShader(gl.FRAGMENT_SHADER);\n\t\t\tgl.shaderSource(fs, this.fragmentShader);\n\t\t\tgl.compileShader(fs);\n\t\t\tvar error = gl.getShaderInfoLog(fs);\n\t\t\tif (error) console.error(error);\n\t\t\tthis.program = gl.createProgram();\n\t\t\tgl.attachShader(this.program, vs);\n\t\t\tgl.attachShader(this.program, fs);\n\t\t\tgl.linkProgram(this.program);\n\t\t\tgl.useProgram(this.program);\n\t\t\tthis.setupTexture();\n\t\t\tif (this.input) gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.input);\n\t\t\tvar texture = this.setupTexture();\n\t\t\tvar fbo = gl.createFramebuffer();\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null); // make it draw canvas\n\t\t\tthis.uniformLocations.time = gl.getUniformLocation(this.program, \"time\");\n\t\t\tthis.uniformLocations.resolution = gl.getUniformLocation(this.program, \"resolution\");\n\t\t\tthis.uniformLocations.texture = gl.getUniformLocation(this.program, \"texture\");\n\t\t\tObject.keys(this.uniforms).forEach(function (name) {\n\t\t\t\t_this.uniformLocations[name] = gl.getUniformLocation(_this.program, name);\n\t\t\t});\n\t\t\tvar verts = [-1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, -1.0, 0.0, -1.0, 1.0, 0.0, 1.0, -1.0, 0.0, -1.0, -1.0, 0.0];\n\t\t\tvar buffer = gl.createBuffer();\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\n\t\t\tvar position = gl.getAttribLocation(this.program, \"position\");\n\t\t\tgl.vertexAttribPointer(position, 3, gl.FLOAT, false, 0, 0);\n\t\t\tgl.enableVertexAttribArray(position);\n\t\t\tvar texCoordData = [0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0];\n\t\t\tvar tbuffer = gl.createBuffer();\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, tbuffer);\n\t\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texCoordData), gl.STATIC_DRAW);\n\t\t\tvar texCoord = gl.getAttribLocation(this.program, \"coord\");\n\t\t\tif (texCoord >= 0) {\n\t\t\t\tgl.vertexAttribPointer(texCoord, 2, gl.FLOAT, false, 0, 0);\n\t\t\t\tgl.enableVertexAttribArray(texCoord);\n\t\t\t}\n\t\t\tthis.initialized = true;\n\t\t}\n\t}, {\n\t\tkey: \"render\",\n\t\tvalue: function render() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (!this.initialized) this.initialize();\n\t\t\tvar gl = this.gl;\n\t\t\tif (this.input) {\n\t\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.input);\n\t\t\t}\n\t\t\tgl.uniform1i(this.uniformLocations.texture, 0);\n\t\t\tgl.uniform2f(this.uniformLocations.resolution, this.output.width, this.output.height);\n\t\t\tgl.uniform1f(this.uniformLocations.time, this.time);\n\t\t\tObject.keys(this.uniforms).forEach(function (name) {\n\t\t\t\tif (typeof _this2.uniforms[name] === 'number') gl.uniform1f(_this2.uniformLocations[name], _this2.uniforms[name]);else if (_typeof(_this2.uniforms[name]) === 'object') gl.uniform1fv(_this2.uniformLocations[name], _this2.uniforms[name]);else console.error('Error: unsupported uniform type (' + _typeof(_this2.uniforms[name]) + ')');\n\t\t\t});\n\t\t\tthis.output.width = this.output.scrollWidth;\n\t\t\tthis.output.height = this.output.scrollHeight;\n\t\t\tgl.viewport(0, 0, this.output.width, this.output.height);\n\t\t\t//gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\n\t\t\tthis.time += this.dt;\n\t\t\treturn this;\n\t\t}\n\t}]);\n\n\treturn Trixie;\n}();\n\nexports.default = Trixie;\n\nTrixie.shaders = require('./shaders.js').default;\nTrixie.uniforms = require('./uniforms.js').default;\nmodule.exports = Trixie;\n\n},{\"./shaders.js\":1,\"./uniforms.js\":3}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/*\n\tUniforms for stock shaders\n*/\n\nexports.default = {\n\tzoom: {\n\t\tx: 0.5,\n\t\ty: 0.5,\n\t\tfactor: 2.0\n\t}\n};\n\n},{}]},{},[2])(2)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2hhZGVycy5qcyIsInNyYy90cml4aWUuanMiLCJzcmMvdW5pZm9ybXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBOzs7O2tCQUllO0FBQ2QsU0FEYyxzQkFDSDtBQUNWO0FBUUEsRUFWYTtBQVdkLE9BWGMsb0JBV0w7QUFDUjtBQVNBLEVBckJhO0FBc0JkLEtBdEJjLGtCQXNCUDtBQUNOO0FBVUEsRUFqQ2E7QUFrQ2QsS0FsQ2Msa0JBa0NQO0FBQ047QUF3QkEsRUEzRGE7QUE0RGQsY0E1RGMsMkJBNERFO0FBQ2Y7QUEyQkEsRUF4RmE7QUF5RmQsY0F6RmMsMkJBeUZFO0FBQ2Y7QUEyQkEsRUFySGE7QUFzSGQsS0F0SGMsa0JBc0hQO0FBQ047QUFhQSxFQXBJYTtBQXFJZCxTQXJJYyxvQkFxSUwsTUFySUssRUFxSUc7QUFDaEIsbUNBQ2dCLE9BQU8sTUFEdkI7QUF5QkEsRUEvSmE7QUFnS2QsZUFoS2MsNEJBZ0tHO0FBQ2hCO0FBWUEsRUE3S2E7QUE4S2QsaUJBOUtjLDhCQThLSztBQUNsQjtBQVlBLEVBM0xhO0FBNExkLFdBNUxjLHdCQTRMRDtBQUNaO0FBeUJBLEVBdE5hO0FBdU5kLEtBdk5jLG1CQXVOUDtBQUNOO0FBTUE7QUE5TmEsQzs7Ozs7Ozs7Ozs7Ozs7O0lDSk0sTTtBQUNwQixpQkFBWSxJQUFaLEVBQWtCO0FBQUE7O0FBQ2pCLE9BQUssV0FBTCxHQUFtQixLQUFuQjtBQUNBLE9BQUssUUFBTCxHQUFnQixLQUFLLFFBQUwsSUFBaUIsRUFBakM7QUFDQSxPQUFLLGdCQUFMLEdBQXdCLEVBQXhCO0FBQ0EsT0FBSyxZQUFMO0FBVUEsT0FBSyxJQUFMLEdBQVksQ0FBWjtBQUNBLE9BQUssRUFBTCxHQUFVLElBQVY7QUFDQSxPQUFLLE9BQUwsR0FBZSxJQUFmO0FBQ0EsT0FBSyxFQUFMLEdBQVUsSUFBVixDQWpCaUIsQ0FpQkQ7QUFDaEIs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RUwsS0FBRyxHQUZFO0FBR0wsVUFBUTtBQUhIO0FBRFEsQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKlxuXHRTdG9jayBzaGFkZXJzXG4qL1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cdGlkZW50aXR5KCkge1xuXHRcdHJldHVybiBgXG5cdFx0XHRwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cdFx0XHR2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7XG5cdFx0XHR1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXHRcdFx0dm9pZCBtYWluKCkge1xuXHRcdFx0XHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgdGV4Q29vcmQpO1xuXHRcdFx0fVxuXHRcdGBcblx0fSxcblx0aW52ZXJ0KCkge1xuXHRcdHJldHVybiBgXG5cdFx0XHRwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cdFx0XHR2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7XG5cdFx0XHR1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXHRcdFx0dm9pZCBtYWluKCkge1xuXHRcdFx0XHR2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIHRleENvb3JkKTtcblx0XHRcdFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKDEuMCAtIGNvbG9yLnJnYiksIGNvbG9yLmEpO1xuXHRcdFx0fVxuXHRcdGBcblx0fSxcblx0ZmxpcCgpIHtcblx0XHRyZXR1cm4gYFxuXHRcdFx0cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXHRcdFx0dmFyeWluZyB2ZWMyIHRleENvb3JkO1xuXHRcdFx0dW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcblx0XHRcdHZvaWQgbWFpbigpIHtcblx0XHRcdFx0dmVjMiBjb29yZCA9IHZlYzIoMS4wLXRleENvb3JkLngsIHRleENvb3JkLnkpO1xuXHRcdFx0XHR2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIGNvb3JkKTtcblx0XHRcdFx0Z2xfRnJhZ0NvbG9yID0gY29sb3I7XG5cdFx0XHR9XG5cdFx0YFxuXHR9LFxuXHRibHVyKCkge1xuXHRcdHJldHVybiBgXG5cdFx0XHQjZGVmaW5lIHJhZGl1cyAxMFxuXHRcdFx0cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXHRcdFx0dmFyeWluZyB2ZWMyIHRleENvb3JkO1xuXHRcdFx0dW5pZm9ybSB2ZWMyIHJlc29sdXRpb247XG5cdFx0XHR1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXHRcdFx0dm9pZCBtYWluKCkge1xuXHRcdFx0XHR2ZWM0IGF2ZyA9IHZlYzQoMCk7XG5cdFx0XHRcdGludCBjb3VudCA9IDA7XG5cdFx0XHRcdGZvciAoaW50IGkgPSAtcmFkaXVzOyBpIDwgcmFkaXVzOyBpKyspIHtcblx0XHRcdFx0XHRmb3IgKGludCBqID0gLXJhZGl1czsgaiA8IHJhZGl1czsgaisrKSB7XG5cdFx0XHRcdFx0XHRpZiAoaSppK2oqaiA8PSByYWRpdXMqcmFkaXVzKSB7XG5cdFx0XHRcdFx0XHRcdGF2ZyArPSB0ZXh0dXJlMkQoXG5cdFx0XHRcdFx0XHRcdFx0dGV4dHVyZSxcblx0XHRcdFx0XHRcdFx0XHR2ZWMyKHRleENvb3JkLnggKyBmbG9hdChpKS9yZXNvbHV0aW9uLngsIHRleENvb3JkLnkgKyBmbG9hdChqKS9yZXNvbHV0aW9uLnkpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGNvdW50ICs9IDE7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGF2ZyA9IGF2ZyAvIGZsb2F0KGNvdW50KTtcblx0XHRcdFx0Z2xfRnJhZ0NvbG9yID0gYXZnO1xuXHRcdFx0fVxuXHRcdGBcblx0fSxcblx0a2FsZWlkb3Njb3BlNCgpIHtcblx0XHRyZXR1cm4gYFxuXHRcdFx0cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXHRcdFx0dmFyeWluZyB2ZWMyIHRleENvb3JkO1xuXHRcdFx0dW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcblx0XHRcdHVuaWZvcm0gZmxvYXQgdGltZTtcblx0XHRcdHZlYzIgS2FsZWlkb3Njb3BlKCB2ZWMyIHV2LCBmbG9hdCBuKSB7XG5cdFx0XHRcdGZsb2F0IFBJID0gMy4xNDE1OTI2NTM1ODk3OTMyMzg0NjI2NDMzODMyNzk1O1xuXHRcdCAgICBmbG9hdCBhbmdsZSA9IFBJIC8gbjtcblx0XHQgICAgZmxvYXQgciA9IGxlbmd0aCggdXYgKTtcblx0XHQgICAgZmxvYXQgYSA9IGF0YW4oIHV2LnksIHV2LnggKSAvIGFuZ2xlO1xuXHRcdCAgICBhID0gbWl4KCBmcmFjdCggYSApLCAxLjAgLSBmcmFjdCggYSApLCBtb2QoIGZsb29yKCBhICksIDIuMCApICkgKiBhbmdsZTtcblx0XHQgICAgLy8gcmFkaWFsID0gdmVjMihhLCByKTtcblx0XHQgICAgcmV0dXJuIHZlYzIoIGNvcyggYSApLCBzaW4oIGEgKSApICogcjtcblx0XHQgIH1cblx0XHRcdHZvaWQgbWFpbigpIHtcblx0XHRcdFx0ZmxvYXQgcm90YXRpb24gPSAwLjA7XG5cdFx0XHRcdGZsb2F0IHNjYWxlID0gMS4wO1xuXHRcdFx0XHR2ZWMyIHBvcyA9IHZlYzIoMC41LCAwLjUpO1xuXHRcdFx0XHRmbG9hdCBibGFkZXMgPSA0LjA7XG5cdFx0XHRcdHZlYzIgdXYgPSB0ZXhDb29yZC54eSAtIDAuNTtcblx0XHRcdFx0dmVjMiBrID0gS2FsZWlkb3Njb3BlKHV2ICogbWF0Mihjb3Mocm90YXRpb24pLCAtc2luKHJvdGF0aW9uKSwgc2luKHJvdGF0aW9uKSwgY29zKHJvdGF0aW9uKSksIGJsYWRlcyk7XG5cdFx0XHRcdG1hdDIgcm0gPSBtYXQyKGNvcyhyb3RhdGlvbiksIC1zaW4ocm90YXRpb24pLCBzaW4ocm90YXRpb24pLCBjb3Mocm90YXRpb24pKTtcblx0XHRcdFx0dmVjMiBjb2xvdXJfayA9IHJtICogKGsgKiBzY2FsZSArIHBvcyk7XG5cdFx0XHRcdHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgY29sb3VyX2spO1xuXHRcdFx0XHRnbF9GcmFnQ29sb3IgPSBjb2xvcjtcblx0XHRcdH1cblx0XHRgO1xuXHR9LFxuXHRrYWxlaWRvc2NvcGU2KCkge1xuXHRcdHJldHVybiBgXG5cdFx0XHRwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cdFx0XHR2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7XG5cdFx0XHR1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXHRcdFx0dW5pZm9ybSBmbG9hdCB0aW1lO1xuXHRcdFx0dmVjMiBLYWxlaWRvc2NvcGUoIHZlYzIgdXYsIGZsb2F0IG4pIHtcblx0XHRcdFx0ZmxvYXQgUEkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTU7XG5cdFx0ICAgIGZsb2F0IGFuZ2xlID0gUEkgLyBuO1xuXHRcdCAgICBmbG9hdCByID0gbGVuZ3RoKCB1diApO1xuXHRcdCAgICBmbG9hdCBhID0gYXRhbiggdXYueSwgdXYueCApIC8gYW5nbGU7XG5cdFx0ICAgIGEgPSBtaXgoIGZyYWN0KCBhICksIDEuMCAtIGZyYWN0KCBhICksIG1vZCggZmxvb3IoIGEgKSwgMi4wICkgKSAqIGFuZ2xlO1xuXHRcdCAgICAvLyByYWRpYWwgPSB2ZWMyKGEsIHIpO1xuXHRcdCAgICByZXR1cm4gdmVjMiggY29zKCBhICksIHNpbiggYSApICkgKiByO1xuXHRcdCAgfVxuXHRcdFx0dm9pZCBtYWluKCkge1xuXHRcdFx0XHRmbG9hdCByb3RhdGlvbiA9IDAuMDtcblx0XHRcdFx0ZmxvYXQgc2NhbGUgPSAxLjA7XG5cdFx0XHRcdHZlYzIgcG9zID0gdmVjMigwLjUsIDAuNSk7XG5cdFx0XHRcdGZsb2F0IGJsYWRlcyA9IDYuMDtcblx0XHRcdFx0dmVjMiB1diA9IHRleENvb3JkLnh5IC0gMC41O1xuXHRcdFx0XHR2ZWMyIGsgPSBLYWxlaWRvc2NvcGUodXYgKiBtYXQyKGNvcyhyb3RhdGlvbiksIC1zaW4ocm90YXRpb24pLCBzaW4ocm90YXRpb24pLCBjb3Mocm90YXRpb24pKSwgYmxhZGVzKTtcblx0XHRcdFx0bWF0MiBybSA9IG1hdDIoY29zKHJvdGF0aW9uKSwgLXNpbihyb3RhdGlvbiksIHNpbihyb3RhdGlvbiksIGNvcyhyb3RhdGlvbikpO1xuXHRcdFx0XHR2ZWMyIGNvbG91cl9rID0gcm0gKiAoayAqIHNjYWxlICsgcG9zKTtcblx0XHRcdFx0dmVjNCBjb2xvciA9IHRleHR1cmUyRCh0ZXh0dXJlLCBjb2xvdXJfayk7XG5cdFx0XHRcdGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xuXHRcdFx0fVxuXHRcdGA7XG5cdH0sXG5cdHpvb20oKSB7XG5cdFx0cmV0dXJuIGBcblx0XHRcdFx0cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXHRcdFx0XHR1bmlmb3JtIGZsb2F0IHg7XG5cdFx0XHRcdHVuaWZvcm0gZmxvYXQgeTtcblx0XHRcdFx0dW5pZm9ybSBmbG9hdCBmYWN0b3I7XG5cdFx0XHRcdHZhcnlpbmcgdmVjMiB0ZXhDb29yZDtcblx0XHRcdFx0dW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcblx0XHRcdFx0dm9pZCBtYWluKCkge1xuXHRcdFx0XHRcdHZlYzIgY29vcmQgPSB2ZWMyKCh0ZXhDb29yZC54IC0geCkvZmFjdG9yICsgeCwgKHRleENvb3JkLnkgLSB5KS9mYWN0b3IgKyB5KTtcblx0XHRcdFx0XHR2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIGNvb3JkKTtcblx0XHRcdFx0XHRnbF9GcmFnQ29sb3IgPSBjb2xvcjtcblx0XHRcdFx0fVxuXHRcdGBcblx0fSxcblx0Y29udm9sdmUoa2VybmVsKSB7XG5cdFx0cmV0dXJuIGBcblx0XHRcdCNkZWZpbmUgc2l6ZSAke2tlcm5lbC5sZW5ndGh9XG5cdFx0XHRwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cdFx0XHR2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7XG5cdFx0XHR1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXHRcdFx0dW5pZm9ybSBmbG9hdCBrZXJuZWxbc2l6ZV07XG5cdFx0XHR1bmlmb3JtIHZlYzIgcmVzb2x1dGlvbjtcblx0XHRcdGZsb2F0IGludG1vZChmbG9hdCBhLCBmbG9hdCBiKSB7XG5cdFx0XHRcdFx0ZmxvYXQgbT1hLWZsb29yKChhKzAuNSkvYikqYjtcblx0XHRcdFx0XHRyZXR1cm4gZmxvb3IobSswLjUpO1xuXHRcdFx0fVxuXHRcdFx0dm9pZCBtYWluKCkge1xuXHRcdFx0XHR2ZWM0IGF2ZyA9IHZlYzQoMCk7XG5cdFx0XHRcdGludCBsZW4gPSBpbnQoc3FydChmbG9hdChzaXplKSkpO1xuXHRcdFx0XHRmbG9hdCB0b3RhbCA9IDAuMDtcblx0XHRcdFx0Zm9yIChpbnQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcblx0XHRcdFx0XHRpbnQgeCA9IGludChpbnRtb2QoZmxvYXQoaSksIGZsb2F0KGxlbikpKTtcblx0XHRcdFx0XHRpbnQgeSA9IGkgLyBsZW47XG5cdFx0XHRcdFx0ZmxvYXQgd2VpZ2h0ID0ga2VybmVsW2ldO1xuXHRcdFx0XHRcdHZlYzIgZHAgPSB2ZWMyKGZsb2F0KHgpLShmbG9hdChsZW4pLTEuMCkvKDIuMCksIGZsb2F0KHkpLShmbG9hdChsZW4pLTEuMCkvKDIuMCkpO1xuXHRcdFx0XHRcdGF2ZyArPSB3ZWlnaHQqdGV4dHVyZTJEKHRleHR1cmUsIHRleENvb3JkICsgZHAgLyByZXNvbHV0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRnbF9GcmFnQ29sb3IgPSB2ZWM0KGF2Zy54eXosIDEuMCk7XG5cdFx0XHR9XG5cdFx0YFxuXHR9LFxuXHR2ZXJ0aWNhbE1pcnJvcigpIHtcblx0XHRyZXR1cm4gYFxuXHRcdFx0cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXHRcdFx0dmFyeWluZyB2ZWMyIHRleENvb3JkO1xuXHRcdFx0dW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcblx0XHRcdHZvaWQgbWFpbigpIHtcblx0XHRcdFx0ZmxvYXQgeDtcblx0XHRcdFx0aWYgKHRleENvb3JkLnggPCAwLjUpIHggPSB0ZXhDb29yZC54O1xuXHRcdFx0XHRlbHNlIHggPSAxLjAgLSB0ZXhDb29yZC54O1xuXHRcdFx0XHR2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIHZlYzIoeCwgdGV4Q29vcmQueSkpO1xuXHRcdFx0XHRnbF9GcmFnQ29sb3IgPSBjb2xvcjtcblx0XHRcdH1cblx0XHRgO1xuXHR9LFxuXHRob3Jpem9udGFsTWlycm9yKCkge1xuXHRcdHJldHVybiBgXG5cdFx0XHRwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cdFx0XHR2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7XG5cdFx0XHR1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xuXHRcdFx0dm9pZCBtYWluKCkge1xuXHRcdFx0XHRmbG9hdCB5O1xuXHRcdFx0XHRpZiAodGV4Q29vcmQueSA8IDAuNSkgeSA9IHRleENvb3JkLnk7XG5cdFx0XHRcdGVsc2UgeSA9IDEuMCAtIHRleENvb3JkLnk7XG5cdFx0XHRcdHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgdmVjMih0ZXhDb29yZC54LCB5KSk7XG5cdFx0XHRcdGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xuXHRcdFx0fVxuXHRcdGA7XG5cdH0sXG5cdGNvbG9yU2hpZnQoKSB7XG5cdFx0cmV0dXJuIGBcblx0XHRcdHByZWNpc2lvbiBoaWdocCBmbG9hdDtcblx0XHRcdHZhcnlpbmcgdmVjMiB0ZXhDb29yZDtcblx0XHRcdHVuaWZvcm0gZmxvYXQgdGltZTtcblx0XHRcdHVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XG5cdFx0XHR2ZWMzIHJnYjJoc3YodmVjMyBjKSB7XG5cdFx0ICAgIHZlYzQgSyA9IHZlYzQoMC4wLCAtMS4wIC8gMy4wLCAyLjAgLyAzLjAsIC0xLjApO1xuXHRcdCAgICB2ZWM0IHAgPSBtaXgodmVjNChjLmJnLCBLLnd6KSwgdmVjNChjLmdiLCBLLnh5KSwgc3RlcChjLmIsIGMuZykpO1xuXHRcdCAgICB2ZWM0IHEgPSBtaXgodmVjNChwLnh5dywgYy5yKSwgdmVjNChjLnIsIHAueXp4KSwgc3RlcChwLngsIGMucikpO1xuXHRcdCAgICBmbG9hdCBkID0gcS54IC0gbWluKHEudywgcS55KTtcblx0XHQgICAgZmxvYXQgZSA9IDEuMGUtMTA7XG5cdFx0ICAgIHJldHVybiB2ZWMzKGFicyhxLnogKyAocS53IC0gcS55KSAvICg2LjAgKiBkICsgZSkpLCBkIC8gKHEueCArIGUpLCBxLngpO1xuXHRcdFx0fVxuXHRcdFx0dmVjMyBoc3YycmdiKHZlYzMgYykge1xuXHRcdFx0ICAgIHZlYzQgSyA9IHZlYzQoMS4wLCAyLjAgLyAzLjAsIDEuMCAvIDMuMCwgMy4wKTtcblx0XHRcdCAgICB2ZWMzIHAgPSBhYnMoZnJhY3QoYy54eHggKyBLLnh5eikgKiA2LjAgLSBLLnd3dyk7XG5cdFx0XHQgICAgcmV0dXJuIGMueiAqIG1peChLLnh4eCwgY2xhbXAocCAtIEsueHh4LCAwLjAsIDEuMCksIGMueSk7XG5cdFx0XHR9XG5cdFx0XHR2b2lkIG1haW4oKSB7XG5cdFx0XHRcdHZlYzQgY2luID0gdGV4dHVyZTJEKHRleHR1cmUsIHRleENvb3JkKTtcblx0XHRcdFx0dmVjMyBoc3YgPSByZ2IyaHN2KGNpbi5yZ2IpO1xuXHRcdFx0XHR2ZWMzIGNvdXQgPSBoc3YycmdiKHZlYzMoZnJhY3QoaHN2LnggKyB0aW1lKjAuMSksIGhzdi55LCBoc3YueikpO1xuXHRcdFx0XHRnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvdXQsIDEuMCk7XG5cdFx0XHR9XG5cdFx0YFxuXHR9LFxuXHR2b2lkKCkge1xuXHRcdHJldHVybiBgXG5cdFx0XHRwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cdFx0XHR2b2lkIG1haW4oKSB7XG5cdFx0XHRcdGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMygwKSwgMS4wKTtcblx0XHRcdH1cblx0XHRgXG5cdH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyaXhpZSB7XG5cdGNvbnN0cnVjdG9yKG9wdHMpIHtcblx0XHR0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG5cdFx0dGhpcy51bmlmb3JtcyA9IG9wdHMudW5pZm9ybXMgfHzCoHt9O1xuXHRcdHRoaXMudW5pZm9ybUxvY2F0aW9ucyA9IHt9O1xuXHRcdHRoaXMudmVydGV4U2hhZGVyID0gYFxuXHRcdFx0cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXHRcdFx0YXR0cmlidXRlIHZlYzMgcG9zaXRpb247XG5cdFx0XHRhdHRyaWJ1dGUgdmVjMiBjb29yZDtcblx0XHRcdHZhcnlpbmcgdmVjMiB0ZXhDb29yZDtcblx0XHRcdHZvaWQgbWFpbigpIHtcblx0XHRcdFx0dGV4Q29vcmQgPSBjb29yZDtcblx0XHRcdCAgXHRnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDEuMCk7XG5cdFx0XHR9XG5cdFx0YDtcblx0XHR0aGlzLnRpbWUgPSAwO1xuXHRcdHRoaXMuZHQgPSAwLjAxO1xuXHRcdHRoaXMucHJvZ3JhbSA9IG51bGw7XG5cdFx0dGhpcy5nbCA9IG51bGw7IC8vIG91dHB1dCBjYW52YXMgZ2wgY29udGV4dFxuXHRcdHRoaXMuZnJhZ21lbnRTaGFkZXIgPSBvcHRzLnNoYWRlcjtcblx0XHR0aGlzLmlucHV0ID0gb3B0cy5pbnB1dDtcblx0XHR0aGlzLm91dHB1dCA9IG9wdHMub3V0cHV0O1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdHNldHVwVGV4dHVyZSgpIHtcblx0XHR2YXIgdGV4dHVyZSA9IHRoaXMuZ2wuY3JlYXRlVGV4dHVyZSgpO1xuXHRcdHRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcblx0XHR0aGlzLmdsLnRleFBhcmFtZXRlcmkodGhpcy5nbC5URVhUVVJFXzJELCB0aGlzLmdsLlRFWFRVUkVfV1JBUF9TLCB0aGlzLmdsLkNMQU1QX1RPX0VER0UpO1xuXHRcdHRoaXMuZ2wudGV4UGFyYW1ldGVyaSh0aGlzLmdsLlRFWFRVUkVfMkQsIHRoaXMuZ2wuVEVYVFVSRV9XUkFQX1QsIHRoaXMuZ2wuQ0xBTVBfVE9fRURHRSk7XG5cdFx0dGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGhpcy5nbC5URVhUVVJFX01JTl9GSUxURVIsIHRoaXMuZ2wuTkVBUkVTVCk7XG5cdFx0dGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCwgdGhpcy5nbC5URVhUVVJFX01BR19GSUxURVIsIHRoaXMuZ2wuTkVBUkVTVCk7XG5cdFx0cmV0dXJuIHRleHR1cmU7XG5cdH1cblx0aW5pdGlhbGl6ZSgpIHtcblx0XHR2YXIgZ2wgPSB0aGlzLm91dHB1dC5nZXRDb250ZXh0KFwid2ViZ2xcIik7XG5cdFx0dGhpcy5nbCA9IGdsO1xuXHRcdHZhciB2cyA9IGdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTtcblx0XHRnbC5zaGFkZXJTb3VyY2UodnMsIHRoaXMudmVydGV4U2hhZGVyKTtcblx0XHRnbC5jb21waWxlU2hhZGVyKHZzKTtcblx0XHR2YXIgZnMgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcblx0XHRnbC5zaGFkZXJTb3VyY2UoZnMsIHRoaXMuZnJhZ21lbnRTaGFkZXIpO1xuXHRcdGdsLmNvbXBpbGVTaGFkZXIoZnMpO1xuXHRcdGxldCBlcnJvciA9IGdsLmdldFNoYWRlckluZm9Mb2coZnMpO1xuXHRcdGlmIChlcnJvcikgY29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0dGhpcy5wcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuXHRcdGdsLmF0dGFjaFNoYWRlcih0aGlzLnByb2dyYW0sIHZzKTtcblx0XHRnbC5hdHRhY2hTaGFkZXIodGhpcy5wcm9ncmFtLCBmcyk7XG5cdFx0Z2wubGlua1Byb2dyYW0odGhpcy5wcm9ncmFtKTtcblx0XHRnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XG5cdFx0dGhpcy5zZXR1cFRleHR1cmUoKTtcblx0XHRpZiAodGhpcy5pbnB1dCkgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCB0aGlzLmlucHV0KTtcblx0XHR2YXIgdGV4dHVyZSA9IHRoaXMuc2V0dXBUZXh0dXJlKCk7XG4gIFx0dmFyIGZibyA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gIFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmYm8pO1xuXHRcdGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSwgMCk7XG5cdFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTsgLy8gbWFrZSBpdCBkcmF3IGNhbnZhc1xuXHRcdHRoaXMudW5pZm9ybUxvY2F0aW9ucy50aW1lID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJ0aW1lXCIpO1xuXHRcdHRoaXMudW5pZm9ybUxvY2F0aW9ucy5yZXNvbHV0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJyZXNvbHV0aW9uXCIpO1xuXHRcdHRoaXMudW5pZm9ybUxvY2F0aW9ucy50ZXh0dXJlID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgXCJ0ZXh0dXJlXCIpO1xuXHRcdE9iamVjdC5rZXlzKHRoaXMudW5pZm9ybXMpLmZvckVhY2gobmFtZSA9PiB7XG5cdFx0XHR0aGlzLnVuaWZvcm1Mb2NhdGlvbnNbbmFtZV0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBuYW1lKTtcblx0XHR9KTtcblx0XHR2YXIgdmVydHMgPSBbXG5cdFx0XHQtMS4wLCAxLjAsIDAuMCxcblx0XHRcdDEuMCwgMS4wLCAwLjAsXG5cdFx0XHQxLjAsIC0xLjAsIDAuMCxcblx0XHRcdC0xLjAsIDEuMCwgMC4wLFxuXHRcdFx0MS4wLCAtMS4wLCAwLjAsXG5cdFx0XHQtMS4wLCAtMS4wLCAwLjAsXG5cdFx0XTtcblx0XHR2YXIgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XG5cdFx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkodmVydHMpLCBnbC5TVEFUSUNfRFJBVyk7XG5cdFx0dmFyIHBvc2l0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcInBvc2l0aW9uXCIpO1xuXHRcdGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb24sIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cdFx0Z2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb24pO1xuXHRcdHZhciB0ZXhDb29yZERhdGEgPSBbXG5cdFx0XHQwLjAsIDAuMCxcblx0XHRcdDEuMCwgMC4wLFxuXHRcdFx0MS4wLCAxLjAsXG5cdFx0XHQwLjAsIDAuMCxcblx0XHRcdDEuMCwgMS4wLFxuXHRcdFx0MC4wLCAxLjAsXG5cdFx0XTtcblx0XHR2YXIgdGJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0YnVmZmVyKTtcblx0XHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheSh0ZXhDb29yZERhdGEpLCBnbC5TVEFUSUNfRFJBVyk7XG5cdFx0dmFyIHRleENvb3JkID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcImNvb3JkXCIpO1xuXHRcdGlmICh0ZXhDb29yZCA+PSAwKSB7XG5cdFx0XHRnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRleENvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcdFx0Z2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGV4Q29vcmQpO1xuXHRcdH1cblx0XHR0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcblx0fVxuXHRyZW5kZXIoKSB7XG5cdFx0aWYgKCF0aGlzLmluaXRpYWxpemVkKSB0aGlzLmluaXRpYWxpemUoKTtcblx0XHR2YXIgZ2wgPSB0aGlzLmdsO1xuXHRcdGlmICh0aGlzLmlucHV0KSB7XG5cdFx0XHRnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIHRoaXMuaW5wdXQpO1xuXHRcdH1cblx0XHRnbC51bmlmb3JtMWkodGhpcy51bmlmb3JtTG9jYXRpb25zLnRleHR1cmUsIDApO1xuXHRcdGdsLnVuaWZvcm0yZih0aGlzLnVuaWZvcm1Mb2NhdGlvbnMucmVzb2x1dGlvbiwgdGhpcy5vdXRwdXQud2lkdGgsIHRoaXMub3V0cHV0LmhlaWdodCk7XG5cdFx0Z2wudW5pZm9ybTFmKHRoaXMudW5pZm9ybUxvY2F0aW9ucy50aW1lLCB0aGlzLnRpbWUpO1xuXHRcdE9iamVjdC5rZXlzKHRoaXMudW5pZm9ybXMpLmZvckVhY2gobmFtZSA9PiB7XG5cdFx0XHRpZiAodHlwZW9mIHRoaXMudW5pZm9ybXNbbmFtZV0gPT09ICdudW1iZXInKSBnbC51bmlmb3JtMWYodGhpcy51bmlmb3JtTG9jYXRpb25zW25hbWVdLCB0aGlzLnVuaWZvcm1zW25hbWVdKTtcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiB0aGlzLnVuaWZvcm1zW25hbWVdID09PSAnb2JqZWN0JykgZ2wudW5pZm9ybTFmdih0aGlzLnVuaWZvcm1Mb2NhdGlvbnNbbmFtZV0sIHRoaXMudW5pZm9ybXNbbmFtZV0pO1xuXHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdFcnJvcjogdW5zdXBwb3J0ZWQgdW5pZm9ybSB0eXBlICgnICsgdHlwZW9mIHRoaXMudW5pZm9ybXNbbmFtZV0gKyAnKScpO1xuXHRcdH0pO1xuXHRcdHRoaXMub3V0cHV0LndpZHRoID0gdGhpcy5vdXRwdXQuc2Nyb2xsV2lkdGg7XG5cdFx0dGhpcy5vdXRwdXQuaGVpZ2h0ID0gdGhpcy5vdXRwdXQuc2Nyb2xsSGVpZ2h0O1xuXHRcdGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMub3V0cHV0LndpZHRoLCB0aGlzLm91dHB1dC5oZWlnaHQpO1xuXHRcdC8vZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xuXHRcdGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCA2KTtcblx0XHR0aGlzLnRpbWUgKz0gdGhpcy5kdDtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufVxuVHJpeGllLnNoYWRlcnMgPSByZXF1aXJlKCcuL3NoYWRlcnMuanMnKS5kZWZhdWx0O1xuVHJpeGllLnVuaWZvcm1zID0gcmVxdWlyZSgnLi91bmlmb3Jtcy5qcycpLmRlZmF1bHQ7XG5tb2R1bGUuZXhwb3J0cyA9IFRyaXhpZTtcbiIsIi8qXG5cdFVuaWZvcm1zIGZvciBzdG9jayBzaGFkZXJzXG4qL1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cdHpvb206IHtcblx0XHR4OiAwLjUsXG5cdFx0eTogMC41LFxuXHRcdGZhY3RvcjogMi4wXG5cdH1cbn1cbiJdfQ==\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/trixie.js\n// module id = cp2t\n// module chunks = 1"],"sourceRoot":""}